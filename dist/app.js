"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const express_1 = tslib_1.__importDefault(require("express"));
const dotenv_1 = tslib_1.__importDefault(require("dotenv"));
const cookieParserMiddleware_1 = tslib_1.__importDefault(require("./middleware/cookieParserMiddleware"));
const helmetMiddleware_1 = tslib_1.__importDefault(require("./middleware/helmetMiddleware"));
const bodyParserMiddleware_1 = tslib_1.__importDefault(require("./middleware/bodyParserMiddleware"));
const corsMiddleware_1 = tslib_1.__importDefault(require("./middleware/corsMiddleware"));
const errorMiddleware_1 = tslib_1.__importDefault(require("./middleware/errors/errorMiddleware"));
const csrfRouter_1 = tslib_1.__importDefault(require("./routes/csrf/csrfRouter"));
const homeRouter_1 = tslib_1.__importDefault(require("./routes/home/homeRouter"));
const validateCsrf_1 = tslib_1.__importDefault(require("./middleware/csrf/validateCsrf"));
const portfolioRouter_1 = tslib_1.__importDefault(require("./routes/portfolio/portfolioRouter"));
dotenv_1.default.config();
const app = (0, express_1.default)();
app.set('trust proxy', 1);
app.use(cookieParserMiddleware_1.default);
app.use(helmetMiddleware_1.default);
app.use(bodyParserMiddleware_1.default);
app.use(corsMiddleware_1.default);
app.use("/api/csrf", csrfRouter_1.default);
app.use("/api/home", validateCsrf_1.default, homeRouter_1.default);
app.use('/api/portfolio', validateCsrf_1.default, portfolioRouter_1.default);
app.use(errorMiddleware_1.default);
const PORT = Number(process.env.PORT) || 8080;
app.listen(PORT, '0.0.0.0', () => {
    console.log(`App running on Port ${PORT}`);
});
